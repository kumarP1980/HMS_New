<%- include('partials/header') %>
<!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<div class="container mt-5">
  <h3>Diagnosis</h3>
<!-- Create the editor container -->
<form action="/diagnosis" method="POST">  
  <input type="hidden" name="personID" value="<%=id%>" />
  <div class="form-group">
    <label for="fname">Name:<%=fname%> <%=lname%></label>
  </div>
  <div class="form-group">    
    <input type="hidden" name="body[title]">
     <div id="editor"></div>     
  </div>
  <button type="submit" name="button" class="btn btn-primary btn-sm" onclick="return quillContents()">Submit</button>
  <button type="cancel" class="btn btn-primary btn-sm">Cancel</button>
</form>

<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<!-- Initialize Quill editor -->
<script>
  var quill = new Quill('#editor', {
    theme: 'snow',
    placeholder: 'Enter Diagnosis'
  });

  const quillContents = () => {
         const form = document.forms[0]
         const editor = document.createElement('input')

         editor.type = 'hidden'
         editor.name = 'body[content]'
         editor.value = document.querySelector('.ql-editor').innerHTML
         form.appendChild(editor)

         return form.submit()
     }

</script>